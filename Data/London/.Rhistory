df %>% group_by(area_code) %<% mutate(delta =  ifelse((date2 - lag(date2)) > 1, NA, (cases-lag(cases))))
df %>% group_by(area_code) %>% mutate(delta =  ifelse((date2 - lag(date2)) > 1, NA, (cases-lag(cases))))
library(dbplyr)
df %>% group_by(area_code) %>% mutate(delta =  ifelse((date2 - lag(date2)) > 1, NA, (cases-lag(cases))))
daylond$expression(Delta)=df %>% group_by(daylond$area_code) %>% mutate(daylond$delta =  ifelse((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases))))
daylond$expression(Delta)=df %>% group_by(daylond$area_code) %>% mutate(daylond$delta=ifelse((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases))
df
daylond$expression(Delta)=df %>% group_by(daylond$area_code) %>% mutate(daylond$delta=ifelse((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases))))
daylond$delta=df %>% group_by(daylond$area_code) %>% mutate(daylond$delta=ifelse((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases))))
daylond$delta=df %>% group_by(dayond$borcode) %>% mutate(daylond$delta=ifelse((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases))))
daylond$delta=df %>% group_by(dayond$borcode) %>% mutate(daylond$delta=ifelse((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases)))
daylond$delta=df %>% group_by(dayond$borcode) %>% mutate(daylond$delta=ifelse(((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases)))
daylond$delta=df %>% group_by(dayond$borcode) %>% mutate(daylond$delta=ifelse(((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases))))
df %>% group_by(dayond$borcode) %>% mutate(daylond$delta=ifelse(((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases))))
library(data.table)
setDT(df)
df[, "Change" := ifelse(date2-shift(date2)==1,
(cases-shift(cases)), NA), by="borcode"]
source('C:/Users/Augustin/OneDrive - King\'s College London/adc/ArcScott/ArcScottSc.R')
library(data.table)
setDT(df)
df(group_by(daylond$borcode),mutate(daylond$delta=ifelse(((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases))))
df(group_by(daylond$borcode),mutate(daylond$delta=ifelse((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases))))
df(group_by(daylond$borcode),mutate(daylond$delta=ifelse((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases)))
data.frame(group_by(daylond$borcode),mutate(daylond$delta=ifelse((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases)))
data.frame(group_by(daylond$borcode),mutate(daylond$delta=ifelse((daylond$date2 - lag(daylond$date2)) > 1, NA, (daylond$cases-lag(daylond$cases))))
data.frame(group_by(daylond$borcode),mutate(daylond$delta=daylond$cases-lag(daylond$cases)))
var <- (group_by(daylond$borcode),mutate(daylond$delta=daylond$cases-lag(daylond$cases)))
var <- group_by(daylond$borcode),mutate(daylond$delta=(daylond$cases-lag(daylond$cases)))
daylond$delta
MyData %>% group_by(daylond$borcode) %>% mutate(daylond$delt = daylond$cases - lag(daylond$cases)) %>%
ungroup
MyData %>% group_by(daylond$borcode) %>% mutate(daylond$delt = daylond$cases - lag(daylond$cases))
install.packages("dplyr")
library(dplyr)
MyData %>% group_by(daylond$borcode) %>% mutate(daylond$delt = daylond$cases - lag(daylond$cases))
MyData %>% group_by(daylond$borcode) %>% mutate(daylond$delt=daylond$cases - lag(daylond$cases))
MyData %>% group_by(daylond$borcode) %>% mutate(delt=daylond$cases - lag(daylond$cases))
daylond %>% group_by(daylond$borcode) %>% mutate(delt=daylond$cases - lag(daylond$cases))
View(daylond)
daylond %>% group_by(borcode) %>% mutate(delt=cases - lag(cases))
View(daylond)
daylond %>% group_by(borcode) %>% mutate(ifelse((date2-lag(date2)>1),na,delt=cases - lag(cases)))
rland::last_error()
rlang::last_error()
dayn=as.numeric(date2)
daylond$dayn=as.numeric(daylond$date2)
View(daylond)
daylond %>% group_by(borcode) %>% mutate(ifelse((daten-lag(daten)>1),na,delt=cases - lag(cases)))
daylond %>% group_by(borcode) %>% mutate(ifelse((dayn-lag(dayn)>1),na,delt=cases - lag(cases)))
library(collapse)
install.packages("collapse")
library(collapse)
settransform(daylong, delta = fdiff(cases, 1, 1, borcode, dayn))
settransform(daylond, delta = fdiff(cases, 1, 1, borcode, dayn))
library(haven)
daylond <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/daylond.dta")
View(daylond)
daylond$borcode<-substr(daylond$area_code,8,9)
daylond$subreg<-2
daylond$subreg[daylond$borcode=="07"|daylond$borcode=="20"|daylond$borcode=="19"|daylond$borcode=="22"|daylond$borcode=="28"|daylond$borcode=="33"]<-1
daylond$subreg[daylond$borcode=="03"|daylond$borcode=="10"|daylond$borcode=="14"]<-3
daylond$subreg[daylond$borcode=="06"|daylond$borcode=="08"|daylond$borcode=="21"|daylond$borcode=="24"|daylond$borcode=="29"|daylond$borcode=="32"]<-4
daylond$subreg[daylond$borcode=="05"|daylond$borcode=="09"|daylond$borcode=="13"|daylond$borcode=="15"|daylond$borcode=="18"|daylond$borcode=="17"|daylond$borcode=="17"]<-5
#
#give names to the five regions
#
daylond$LondSR<-"central"
daylond$LondSR[daylond$subreg==2]<-"east"
daylond$LondSR[daylond$subreg==3]<-"north"
daylond$LondSR[daylond$subreg==4]<-"south"
daylond$LondSR[daylond$subreg==5]<-"west"
ggplot(daylond, aes(date2,cases, group=subreg,color=LondSR)) + stat_summary(fun = "mean",size = 0.1,geom="point") + stat_smooth(se=FALSE)
library(ggplot2)
ggplot(daylond, aes(date2,cases, group=subreg,color=LondSR)) + stat_summary(fun = "mean",size = 0.1,geom="point") + stat_smooth(se=FALSE)
View(daylond)
ggplot(daylond, aes(date2,delta, group=subreg,color=LondSR)) + stat_summary(fun = "mean",size = 0.1,geom="point") + stat_smooth(se=FALSE)
colnames(daylon)
# get column names
colnames(daylond)
names(daylond)[names(daylond) == "Date"] <- "date2"
View(daylond)
names(daylond)[names(daylond) == "date2"] <- "Date"
View(daylond)
ggplot(daylond, aes(date2,delta, group=subreg,color=LondSR)) + stat_summary(fun = "mean",size = 0.1,geom="point") + stat_smooth(se=FALSE)
ggplot(daylond, aes(Date,delta, group=subreg,color=LondSR)) + stat_summary(fun = "mean",size = 0.1,geom="point") + stat_smooth(se=FALSE)
source('C:/Users/Augustin/OneDrive - King\'s College London/adc/ArcScott/ArcScottSc.R')
library(readxl)
library(ggplot2)
library(ggcorrplot)
library(labeling)
library(matrixStats)
library(MatrixModels)
library(openair)
library(tidyselect)
library(texreg)
library(tibble)
library(devtools)
library(plyr)
library(haven)
library(reshape)
ggplot(Weeklo, aes(week,y=cases*(100000/pop11), group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(25,40)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
View(underlying_data_2020_06_01_t)
View(Weeklo)
View(underlying_data_2020_06_01_t)
View(Weeklo)
View(underlying_data_2020_06_01_t)
View(Weeklo)
View(underlying_data_2020_06_01_t)
weeklo$poverty=underlying_data_2020_06_01_t$child_poverty_prop
View(Weeklo)
weeklo$poverty<-underlying_data_2020_06_01_t$child_poverty_prop
View(Weeklo)
Weeklo <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/Lond_week_long.dta")
Weeklo$borcode<-substr(Weeklo$area_code,8,9)
#
#gen code for 5 London sub-regions
#
Weeklo$subreg<-2
Weeklo$subreg[Weeklo$borcode=="07"|Weeklo$borcode=="20"|Weeklo$borcode=="19"|Weeklo$borcode=="22"|Weeklo$borcode=="28"|Weeklo$borcode=="33"]<-1
Weeklo$subreg[Weeklo$borcode=="03"|Weeklo$borcode=="10"|Weeklo$borcode=="14"]<-3
Weeklo$subreg[Weeklo$borcode=="06"|Weeklo$borcode=="08"|Weeklo$borcode=="21"|Weeklo$borcode=="24"|Weeklo$borcode=="29"|Weeklo$borcode=="32"]<-4
Weeklo$subreg[Weeklo$borcode=="05"|Weeklo$borcode=="09"|Weeklo$borcode=="13"|Weeklo$borcode=="15"|Weeklo$borcode=="18"|Weeklo$borcode=="17"|Weeklo$borcode=="17"]<-5
#
#give names to the five regions
#
Weeklo$LondSR<-"central"
Weeklo$LondSR[Weeklo$subreg==2]<-"east"
Weeklo$LondSR[Weeklo$subreg==3]<-"north"
Weeklo$LondSR[Weeklo$subreg==4]<-"south"
Weeklo$LondSR[Weeklo$subreg==5]<-"west"
#
ggplot(Weeklo, aes(week,casper100000, group=subreg,color=LondSR)) + stat_summary(fun = "mean",size = 0.1,geom="point") + stat_smooth(se=FALSE)
#
daylond <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/daylond.dta")
#
daylond$borcode<-substr(daylond$area_code,8,9)
daylond$subreg<-2
daylond$subreg[daylond$borcode=="07"|daylond$borcode=="20"|daylond$borcode=="19"|daylond$borcode=="22"|daylond$borcode=="28"|daylond$borcode=="33"]<-1
daylond$subreg[daylond$borcode=="03"|daylond$borcode=="10"|daylond$borcode=="14"]<-3
daylond$subreg[daylond$borcode=="06"|daylond$borcode=="08"|daylond$borcode=="21"|daylond$borcode=="24"|daylond$borcode=="29"|daylond$borcode=="32"]<-4
daylond$subreg[daylond$borcode=="05"|daylond$borcode=="09"|daylond$borcode=="13"|daylond$borcode=="15"|daylond$borcode=="18"|daylond$borcode=="17"|daylond$borcode=="17"]<-5
#
#give names to the five regions
#
daylond$LondSR<-"central"
daylond$LondSR[daylond$subreg==2]<-"east"
daylond$LondSR[daylond$subreg==3]<-"north"
daylond$LondSR[daylond$subreg==4]<-"south"
daylond$LondSR[daylond$subreg==5]<-"west"
ggplot(daylond, aes(date2,cases, group=subreg,color=LondSR)) + stat_summary(fun = "mean",size = 0.1,geom="point") + stat_smooth(se=FALSE)
library(data.table)
setDT(df)
#this is to generate delta for cases, lagged once, iterated once, by borcode, ordered by dayn
#settransform(daylond, delta = fdiff(cases, 1, 1, borcode, dayn))
#
# get column names
colnames(daylond)
##
# Rename column
names(daylond)[names(daylond) == "Date"] <- "Date (day)"
ggplot(daylond, aes(`Date (day)`,cases, group=subreg,color=LondSR)) + stat_summary(fun = "mean",size = 0.1,geom="point") + stat_smooth(se=FALSE)
#using 5 plots, one for each sub-regions
ggplot(Weeklo, aes(week,y=cases*(100000/pop11), group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(25,40)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
weeklo$poverty<-underlying_data_2020_06_01_t$child_poverty_prop
weeklo$poverty<-.
Weeklo$_merge=underlying_data_2020_06_01_t$child_poverty_prop
Weeklo$poverty<-underlying_data_2020_06_01_t$child_poverty_prop
View(Weeklo)
endpoint <- 'https://api.coronavirus.data.gov.uk/v1/data?filters=areaType=nation;areaName=england&structure={"date":"date","newCases":"newCasesByPublishDate"}'
httr::GET(
url = endpoint,
timeout(10)
) -> response
if (response$status_code >= 400) {
err_msg = httr::http_status(response)
stop(err_msg)
}
# Convert response from binary to JSON:
json_text <- content(response, "text")
data      <- jsonlite::fromJSON(json_text)
print(data)
head(data)
LSOAs_cases <- read.csv("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/LSOAs_cases.csv")
View(LSOAs_cases)
library(haven)
LaDayW8t45 <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/LaDayW8t45.dta")
View(LaDayW8t45)
LaDayw8t45$borcode<-substr(LaDayw8t45$LaCode,8,9)
LaDayw8t45$subreg<-2
LaDayw8t45$subreg[LaDayw8t45$borcode=="07"|LaDayw8t45$borcode=="20"|LaDayw8t45$borcode=="19"|LaDayw8t45$borcode=="22"|LaDayw8t45$borcode=="28"|LaDayw8t45$borcode=="33"]<-1
LaDayw8t45$subreg[LaDayw8t45$borcode=="03"|LaDayw8t45$borcode=="10"|LaDayw8t45$borcode=="14"]<-3
LaDayw8t45$subreg[LaDayw8t45$borcode=="06"|LaDayw8t45$borcode=="08"|LaDayw8t45$borcode=="21"|LaDayw8t45$borcode=="24"|LaDayw8t45$borcode=="29"|LaDayw8t45$borcode=="32"]<-4
LaDayw8t45$subreg[LaDayw8t45$borcode=="05"|LaDayw8t45$borcode=="09"|LaDayw8t45$borcode=="13"|LaDayw8t45$borcode=="15"|LaDayw8t45$borcode=="18"|LaDayw8t45$borcode=="17"|LaDayw8t45$borcode=="17"]<-5
#
#give names to the five regions
#
LaDayw8t45$LondSR<-"central"
LaDayw8t45$LondSR[LaDayw8t45$subreg==2]<-"east"
LaDayw8t45$LondSR[LaDayw8t45$subreg==3]<-"north"
LaDayw8t45$LondSR[LaDayw8t45$subreg==4]<-"south"
LaDayw8t45$LondSR[LaDayw8t45$subreg==5]<-"west"
LaDayW8t45$borcode<-substr(LaDayW8t45$LaCode,8,9)
LaDayW8t45$subreg<-2
LaDayW8t45$subreg[LaDayW8t45$borcode=="07"|LaDayW8t45$borcode=="20"|LaDayW8t45$borcode=="19"|LaDayW8t45$borcode=="22"|LaDayW8t45$borcode=="28"|LaDayW8t45$borcode=="33"]<-1
LaDayW8t45$subreg[LaDayW8t45$borcode=="03"|LaDayW8t45$borcode=="10"|LaDayW8t45$borcode=="14"]<-3
LaDayW8t45$subreg[LaDayW8t45$borcode=="06"|LaDayW8t45$borcode=="08"|LaDayW8t45$borcode=="21"|LaDayW8t45$borcode=="24"|LaDayW8t45$borcode=="29"|LaDayW8t45$borcode=="32"]<-4
LaDayW8t45$subreg[LaDayW8t45$borcode=="05"|LaDayW8t45$borcode=="09"|LaDayW8t45$borcode=="13"|LaDayW8t45$borcode=="15"|LaDayW8t45$borcode=="18"|LaDayW8t45$borcode=="17"|LaDayW8t45$borcode=="17"]<-5
#
#give names to the five regions
#
LaDayW8t45$LondSR<-"central"
LaDayW8t45$LondSR[LaDayW8t45$subreg==2]<-"east"
LaDayW8t45$LondSR[LaDayW8t45$subreg==3]<-"north"
LaDayW8t45$LondSR[LaDayW8t45$subreg==4]<-"south"
LaDayW8t45$LondSR[LaDayW8t45$subreg==5]<-"west"
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11), group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(25,40)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
library(readxl)
library(ggplot2)
library(ggcorrplot)
library(labeling)
library(matrixStats)
library(MatrixModels)
library(openair)
library(tidyselect)
library(texreg)
library(tibble)
library(devtools)
library(plyr)
library(haven)
library(reshape)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11), group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(25,40)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11), group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,40)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11), group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11), group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(20,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11), group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(30,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
LaDayW8t45$LondSR<-"Central London"
LaDayW8t45$LondSR[LaDayW8t45$subreg==2]<-"East London"
LaDayW8t45$LondSR[LaDayW8t45$subreg==3]<-"North London"
LaDayW8t45$LondSR[LaDayW8t45$subreg==4]<-"South London"
LaDayW8t45$LondSR[LaDayW8t45$subreg==5]<-"West London"
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11), group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11), group=borcode,color=factor(area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11), group=borcode,color=factor(area_name) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=facor(area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=factor(area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=factor(area_name))) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)++
scale_colour_manual(area_name=c(Redbridge = "blue", sd = "blue", Q1 = "red", Q3 = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)++
scale_colour_manual(area_name=c(Redbridge = "blue", Islington = "black", Q1 = "red", Q3 = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)++
scale_colour_manual(area_name=c(Redbridge = "blue", Islington = "black", Brent = "red", Newham = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)++
scale_colour_manual(area_name=c(`Redbridge' = "blue", `Islington' = "black", `Brent' = "red", `Newham' = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)++
scale_colour_manual(area_name=c(`Redbridge' = "blue", `Islington' = "black", `Brent' = "red", `Newham' = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)++
scale_colour_manual(area_name=c(`Redbridge' = "blue", `Islington` = "black", `Brent' = "red", `Newham' = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)++
scale_colour_manual(area_name=c(`Redbridge' = "blue", "Islington" = "black", `Brent' = "red", `Newham' = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)++
scale_colour_manual(area_name=c(`Redbridge' = "blue", "Islington" = "black", "Brent" = "red", "Newham" = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)++
scale_colour_manual(area_name=c(`Redbridge' = "blue", "Islington" = "black", "Brent" = "red", "Newham" = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)++
scale_colour_manual(area_name=c("Redbridge" = "blue", "Islington" = "black", "Brent" = "red", "Newham" = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+
scale_colour_manual(area_name=c("Redbridge" = "blue", "Islington" = "black", "Brent" = "red", "Newham" = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(area_name=c(`Redbridge' = "blue", "Islington" = "black", "Brent" = "red", "Newham" = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
q
)
!
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(area_name=c(Redbridge = "blue", "Islington" = "black", "Brent" = "red", "Newham" = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(area_name=c("Redbridge" = blue, "Islington" = black, "Brent" = red, "Newham" = red)) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Redbridge" = blue, "Islington" = black, "Brent" = red, "Newham" = red)) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Redbridge" = "blue", "Islington" = "black", "Brent" = "red", "Newham" = "red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="blue", "Bexley"="red", "Greenwich"="green", "Hackney"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
View(LaDayW8t45)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="blue", "Bexley"="red", "Greenwich"="green", "Hackney"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", )) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="blue", "Bexley"="red", "Greenwich"="green", "Hackney"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="blue", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"=brown) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="blue", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown") + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="blue", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="blue", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown", "Brent"="blue", "Ealing"="red", "Hammersmith & Fulham"="green", "Hillingdon"="black", "Harrow"="yellow", "Hounslow"="green")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="blue", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown", "Brent"="blue", "Ealing"="red", "Hammersmith & Fulham"="green", "Hillingdon"="black", "Harrow"="yellow", "Hounslow"="green","Barnet"="blue", "Enfield"="red", "Haringey"="brown")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="blue", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown", "Brent"="blue", "Ealing"="red", "Hammersmith & Fulham"="grey", "Hillingdon"="black", "Harrow"="yellow", "Hounslow"="green","Barnet"="blue", "Enfield"="red", "Haringey"="brown")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="green", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown", "Brent"="blue", "Ealing"="red", "Hammersmith & Fulham"="grey", "Hillingdon"="black", "Harrow"="yellow", "Hounslow"="green","Barnet"="blue", "Enfield"="red", "Haringey"="brown")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="black", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown", "Brent"="blue", "Ealing"="red", "Hammersmith & Fulham"="grey", "Hillingdon"="black", "Harrow"="yellow", "Hounslow"="green","Barnet"="blue", "Enfield"="red", "Haringey"="brown")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="black", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown", "Brent"="blue", "Ealing"="red", "Hammersmith & Fulham"="blue", "Hillingdon"="black", "Harrow"="yellow", "Hounslow"="green","Barnet"="blue", "Enfield"="red", "Haringey"="brown")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="black", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown", "Brent"="blue", "Ealing"="red", "Hammersmith & Fulham"="blue", "Hillingdon"="black", "Harrow"="yellow", "Hounslow"="green","Barnet"="blue", "Enfield"="red", "Haringey"="brown")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="black", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="grey", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown", "Brent"="blue", "Ealing"="red", "Hammersmith & Fulham"="blue", "Hillingdon"="black", "Harrow"="yellow", "Hounslow"="green","Barnet"="blue", "Enfield"="red", "Haringey"="brown")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="black", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="brown", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown", "Brent"="blue", "Ealing"="red", "Hammersmith & Fulham"="blue", "Hillingdon"="black", "Harrow"="yellow", "Hounslow"="green","Barnet"="blue", "Enfield"="red", "Haringey"="brown")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(LaDayW8t45, aes(week,y=Cases*(100000/pop11),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3) + scale_colour_manual(values =c("Barking & Dagenham"="black", "Bexley"="red", "Greenwich"="green", "Hackney and City of London"="black", "Havering"="brown", "Lewisham"="brown", "Newham"="blue", "Redbridge"="green", "Tower Hamlets"="black", "Waltham Forest"="green", "Camden"="blue", "Islington"="green", "Kensington & Chelsea"="brown", "Lambeth"="black", "Southwark"="blue", "Westminster"="red", "Bromley"="blue", "Croydon"="brown", "Kingston"="green", "Merton"="yellow", "Richmond"="grey", "Sutton"="black", "Wandsworth"="brown", "Brent"="blue", "Ealing"="red", "Hammersmith & Fulham"="black", "Hillingdon"="black", "Harrow"="yellow", "Hounslow"="green","Barnet"="blue", "Enfield"="red", "Haringey"="brown")) + facet_wrap(.~LondSR,nrow=2,ncol=3)
source('C:/Users/Augustin/OneDrive - King\'s College London/adc/ArcScott/ArcScottSc.R')
library(haven)
CasesWeekAll <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/CasesWeekAll.dta")
View(CasesWeekAll)
CasesWeekAll$borcode<-substr(CasesWeekAll$area_code,8,9)
CasesWeekAll$subreg<-2
CasesWeekAll$subreg[CasesWeekAll$borcode=="07"|CasesWeekAll$borcode=="20"|CasesWeekAll$borcode=="19"|CasesWeekAll$borcode=="22"|CasesWeekAll$borcode=="28"|CasesWeekAll$borcode=="33"]<-1
CasesWeekAll$subreg[CasesWeekAll$borcode=="03"|CasesWeekAll$borcode=="10"|CasesWeekAll$borcode=="14"]<-3
CasesWeekAll$subreg[CasesWeekAll$borcode=="06"|CasesWeekAll$borcode=="08"|CasesWeekAll$borcode=="21"|CasesWeekAll$borcode=="24"|CasesWeekAll$borcode=="29"|CasesWeekAll$borcode=="32"]<-4
CasesWeekAll$subreg[CasesWeekAll$borcode=="05"|CasesWeekAll$borcode=="09"|CasesWeekAll$borcode=="13"|CasesWeekAll$borcode=="15"|CasesWeekAll$borcode=="18"|CasesWeekAll$borcode=="17"|CasesWeekAll$borcode=="17"]<-5
CasesWeekAll$LondSR<-"central"
CasesWeekAll$LondSR[CasesWeekAll$subreg==2]<-"east"
CasesWeekAll$LondSR[CasesWeekAll$subreg==3]<-"north"
CasesWeekAll$LondSR[CasesWeekAll$subreg==4]<-"south"
CasesWeekAll$LondSR[CasesWeekAll$subreg==5]<-"west"
#
ggplot(CasesWeekAll, aes(week,casper100000, group=subreg,color=LondSR)) + stat_summary(fun = "mean",size = 0.1,geom="point") + stat_smooth(se=FALSE)
ggplot(CasesWeekAll, aes(week,cases, group=subreg,color=LondSR)) + stat_summary(fun = "mean",size = 0.1,geom="point") + stat_smooth(se=FALSE)
library(readxl)
library(ggplot2)
library(ggcorrplot)
library(labeling)
library(matrixStats)
library(MatrixModels)
library(openair)
library(tidyselect)
library(texreg)
library(tibble)
library(devtools)
library(plyr)
library(haven)
library(reshape)
ggplot(CasesWeekAll, aes(week,cases, group=subreg,color=LondSR)) + stat_summary(fun = "mean",size = 0.1,geom="point") + stat_smooth(se=FALSE)
ggplot(CasesWeekAll, aes(week,y=cases*(100000/total_populaton_mid_2018),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(CasesWeekAll, aes(week,y=cases*(100000/`total_populaton_mid_2018`),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
#
ggplot(CasesWeekAll, aes(week,y=cases*(100000/`total_population_mid_2018`),group=borcode,color=area_name)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(CasesWeekAll, aes(week,y=cases*(100000/`total_population_mid_2018`),group=borcode,color=areaname)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(CasesWeekAll, aes(week,y=cases*(100000/total_population_mid_2018),group=subreg,color=LondSR)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,45)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(CasesWeekAll, aes(week,y=cases*(100000/total_population_mid_2018),group=subreg,color=LondSR)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,50)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
CasesWeekAll <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/CasesWeekAll.dta")
> View(CasesWeekAll)
CasesWeekAll$borcode<-substr(CasesWeekAll$area_code,8,9)
#
#gen code for 5 London sub-regions
#
CasesWeekAll$subreg<-2
CasesWeekAll$subreg[CasesWeekAll$borcode=="07"|CasesWeekAll$borcode=="20"|CasesWeekAll$borcode=="19"|CasesWeekAll$borcode=="22"|CasesWeekAll$borcode=="28"|CasesWeekAll$borcode=="33"]<-1
CasesWeekAll$subreg[CasesWeekAll$borcode=="03"|CasesWeekAll$borcode=="10"|CasesWeekAll$borcode=="14"]<-3
CasesWeekAll$subreg[CasesWeekAll$borcode=="06"|CasesWeekAll$borcode=="08"|CasesWeekAll$borcode=="21"|CasesWeekAll$borcode=="24"|CasesWeekAll$borcode=="29"|CasesWeekAll$borcode=="32"]<-4
CasesWeekAll$subreg[CasesWeekAll$borcode=="05"|CasesWeekAll$borcode=="09"|CasesWeekAll$borcode=="13"|CasesWeekAll$borcode=="15"|CasesWeekAll$borcode=="18"|CasesWeekAll$borcode=="17"|CasesWeekAll$borcode=="17"]<-5
#
#give names to the five regions
#
CasesWeekAll$LondSR<-"central"
CasesWeekAll$LondSR[CasesWeekAll$subreg==2]<-"east"
CasesWeekAll$LondSR[CasesWeekAll$subreg==3]<-"north"
CasesWeekAll$LondSR[CasesWeekAll$subreg==4]<-"south"
CasesWeekAll$LondSR[CasesWeekAll$subreg==5]<-"west"
CasesWeekAll$PovGr<-"Medium"
CasesWeekAll$PovGr<-"VeryHigh"
CasesWeekAll$LondSR[CasesWeekAll$PovGr==2]<-"High"
CasesWeekAll$LondSR[CasesWeekAll$PovGr==3]<-"Medium"
CasesWeekAll$LondSR[CasesWeekAll$PovGr==4]<-"Low"
ggplot(CasesWeekAll, aes(week,y=cases*(100000/total_population_mid_2018),group=subreg,color=PovGr)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,50)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
CasesWeekAll$PovGr<-"VeryHigh"
CasesWeekAll$PovGr[CasesWeekAll$pov==2]<-"High"
CasesWeekAll$PovGr[CasesWeekAll$pov==3]<-"Medium"
CasesWeekAll$PovGr[CasesWeekAll$pov==4]<-"Low"
ggplot(CasesWeekAll, aes(week,y=cases*(100000/total_population_mid_2018),group=subreg,color=PovGr)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,50)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
source('C:/Users/Augustin/OneDrive - King\'s College London/adc/ArcScott/ArcScottSc.R')
CasesWeekAll$PovGr<-"VeryHigh"
CasesWeekAll$PovGr[CasesWeekAll$pov==2]<-"High"
CasesWeekAll$PovGr[CasesWeekAll$pov==3]<-"Medium"
CasesWeekAll$PovGr[CasesWeekAll$pov==4]<-"Low"
ggplot(CasesWeekAll, aes(week,y=cases*(100000/total_population_mid_2018),group=subreg,color=PovGr)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,50)+facet_wrap(.~subregion,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
ggplot(CasesWeekAll, aes(week,y=cases*(100000/total_population_mid_2018),group=pov,color=PovGr)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,50)+facet_wrap(.~subreg,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
CasesWeekAll$PovGr<-"Very High"
CasesWeekAll$PovGr[CasesWeekAll$pov==2]<-"High"
CasesWeekAll$PovGr[CasesWeekAll$pov==3]<-"Medium"
CasesWeekAll$PovGr[CasesWeekAll$pov==4]<-"Low"
ggplot(CasesWeekAll, aes(week,y=cases*(100000/total_population_mid_2018),group=pov,color=PovGr)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,50)+facet_wrap(.~subreg,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
source('C:/Users/Augustin/OneDrive - King\'s College London/adc/ArcScott/ArcScottSc.R')
library(haven)
CasesWeekAll <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/CasesWeekAll.dta")
View(CasesWeekAll)
CasesWeekAll$borcode<-substr(CasesWeekAll$area_code,8,9)
#
#gen code for 5 London sub-regions
#
CasesWeekAll$subreg<-2
CasesWeekAll$subreg[CasesWeekAll$borcode=="07"|CasesWeekAll$borcode=="20"|CasesWeekAll$borcode=="19"|CasesWeekAll$borcode=="22"|CasesWeekAll$borcode=="28"|CasesWeekAll$borcode=="33"]<-1
CasesWeekAll$subreg[CasesWeekAll$borcode=="03"|CasesWeekAll$borcode=="10"|CasesWeekAll$borcode=="14"]<-3
CasesWeekAll$subreg[CasesWeekAll$borcode=="06"|CasesWeekAll$borcode=="08"|CasesWeekAll$borcode=="21"|CasesWeekAll$borcode=="24"|CasesWeekAll$borcode=="29"|CasesWeekAll$borcode=="32"]<-4
CasesWeekAll$subreg[CasesWeekAll$borcode=="05"|CasesWeekAll$borcode=="09"|CasesWeekAll$borcode=="13"|CasesWeekAll$borcode=="15"|CasesWeekAll$borcode=="18"|CasesWeekAll$borcode=="17"|CasesWeekAll$borcode=="17"]<-5
#
#give names to the five regions
#
CasesWeekAll$LondSR<-"central"
CasesWeekAll$LondSR[CasesWeekAll$subreg==2]<-"east"
CasesWeekAll$LondSR[CasesWeekAll$subreg==3]<-"north"
CasesWeekAll$LondSR[CasesWeekAll$subreg==4]<-"south"
CasesWeekAll$LondSR[CasesWeekAll$subreg==5]<-"west"
#
CasesWeekAll$PovGr<-"Very High"
CasesWeekAll$PovGr[CasesWeekAll$pov==2]<-"High"
CasesWeekAll$PovGr[CasesWeekAll$pov==3]<-"Medium"
CasesWeekAll$PovGr[CasesWeekAll$pov==4]<-"Low"
ggplot(CasesWeekAll, aes(week,y=cases*(100000/total_population_mid_2018),group=pov,color=PovGr)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,50)+facet_wrap(.~subreg,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
CasesWeekAll$PovGr<-"Very High"
CasesWeekAll$PovGr[CasesWeekAll$pov2==2]<-"High"
CasesWeekAll$PovGr[CasesWeekAll$pov2==3]<-"Medium"
CasesWeekAll$PovGr[CasesWeekAll$pov2==4]<-"Low"
ggplot(CasesWeekAll, aes(week,y=cases*(100000/total_population_mid_2018),group=pov2,color=PovGr)) + stat_smooth(se=FALSE) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(8,50)+facet_wrap(.~subreg,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)
source('C:/Users/Augustin/OneDrive - King\'s College London/adc/ArcScott/ArcScottSc.R')
View(LSOAs_cases)
source('C:/Users/Augustin/OneDrive - King\'s College London/adc/ArcScott/ArcScottSc.R')
library(haven)
remove(environment=weekmsim)
weekmsim <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/imputedMSOAweekup55.dta")
levels(weekmsim)
levels(weekmsim$week)
View(weekmsim)
levels(weekmsim$week)
t.test(weekmsim$week)
View(weekmsim)
source('C:/Users/Augustin/OneDrive - King\'s College London/adc/ArcScott/ArcScottSc.R')
library(haven)
imputedMSOAweekup60 <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/imputedMSOAweekup60.dta")
View(imputedMSOAweekup60)
class(imputedMSOAweekup60$date3)
typeof(imputedMSOAweekup60$date3)
length(imputedMSOAweekup60$date3)
str(imputedMSOAweekup60$date3)
attr(imputedMSOAweekup60$date3)
names(imputedMSOAweekup60$date3)
date <-imputedMSOAweekup60$date3
library(haven)
imputedMSOAweekup60 <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/imputedMSOAweekup60.dta")
View(imputedMSOAweekup60)
library(haven)
imputedMSOAweekup60 <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/imputedMSOAweekup60.dta")
View(imputedMSOAweekup60)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(lubridate)
library(RCurl)
library(rvest)
library(haven)
library(flexdashboard)
```{r ggplot, fig.keep = 'all', Tidy=TRUE, echo=F, message=FALSE, warning=FALSE, include=T, out.width="120%", fig.width = 7 ,fig.height = 7,dpi=144}
```{r load-data-3,  echo=F, message=FALSE, warning=FALSE, include=T}
```{r load-data-2,  echo=F, message=FALSE, warning=FALSE, include=T}
datage <- as_tibble(read_stata("../Data/London/age.dta"))
datage <- datage %>% mutate(borocode=case_when(borcode %in% c("07","20","19","22","28","33")~1, borcode %in% c("02","04","11","12","16","23","25","26","30")~2, borcode %in% c("03","10","14")~3, borcode %in% c("06","08","21","24","29","32")~4, borcode %in% c("05", "09", "13","15","17","18","27")~5))
datage <- datage %>% mutate(LondSR=case_when(borocode %in% c(1)~"Central London",borocode %in% c(2)~"East London",borocode %in% c(3)~"North London",borocode %in% c(4)~"South London", borocode %in% c(5)~"West London"))
```
```{r load-data-2,  echo=F, message=FALSE, warning=FALSE, include=T}
datage <- as_tibble(read_stata("../Data/London/age.dta"))
datage <- datage %>% mutate(borocode=case_when(borcode %in% c("07","20","19","22","28","33")~1, borcode %in% c("02","04","11","12","16","23","25","26","30")~2, borcode %in% c("03","10","14")~3, borcode %in% c("06","08","21","24","29","32")~4, borcode %in% c("05", "09", "13","15","17","18","27")~5))
datage <- datage %>% mutate(LondSR=case_when(borocode %in% c(1)~"Central London",borocode %in% c(2)~"East London",borocode %in% c(3)~"North London",borocode %in% c(4)~"South London", borocode %in% c(5)~"West London"))
```
```{r load-data-2,  echo=F, message=FALSE, warning=FALSE, include=T}
datage <- as_tibble(read_stata("../Data/London/age.dta"))
datage <- datage %>% mutate(borocode=case_when(borcode %in% c("07","20","19","22","28","33")~1, borcode %in% c("02","04","11","12","16","23","25","26","30")~2, borcode %in% c("03","10","14")~3, borcode %in% c("06","08","21","24","29","32")~4, borcode %in% c("05", "09", "13","15","17","18","27")~5))
datage <- datage %>% mutate(LondSR=case_when(borocode %in% c(1)~`Central London`,borocode %in% c(2)~`East London`,borocode %in% c(3)~"North London",borocode %in% c(4)~"South London", borocode %in% c(5)~"West London"))
```{r load-data-2,  echo=F, message=FALSE, warning=FALSE, include=T}
View(datage)
```{r load-data-2,  echo=F, message=FALSE, warning=FALSE, include=T}
View(datage)
```{r load-data-2,  echo=F, message=FALSE, warning=FALSE, include=T}
summarise_(.datage.borcode)
summarise_(.datage,borcode)
summarise_(datage,borcode)
summarise_(datage$borcode)
summarise(datage$borcode)
summary(datage$borcode)
```{r load-data-2,  echo=F, message=FALSE, warning=FALSE, include=T}
library(haven)
imputedMSOAweekup70 <- read_dta("C:/Users/Augustin/OneDrive - King's College London/adc/ArcScott/data/imputedMSOAweekup70.dta")
View(imputedMSOAweekup70)
View(datage)
remove(environment=age)
age <- read_dta("data/age.dta")
setwd("C:/Users/Augustin/Documents/GitHub/covid19/Data/London/")
remove(environment=age)
age <- read_dta("data/age.dta")
age <- read_dta("age.dta")
View(age)
age$subreg<-2
age$subreg[age$borcode=="07"|age$borcode=="20"|age$borcode=="19"|age$borcode=="22"|age$borcode=="28"|age$borcode=="33"]<-1
age$subreg[age$borcode=="03"|age$borcode=="10"|age$borcode=="14"]<-3
age$subreg[age$borcode=="06"|age$borcode=="08"|age$borcode=="21"|age$borcode=="24"|age$borcode=="29"|age$borcode=="32"]<-4
age$subreg[age$borcode=="05"|age$borcode=="09"|age$borcode=="13"|age$borcode=="15"|age$borcode=="18"|age$borcode=="17"|age$borcode=="27"]<-5
ge$LondSR<-"Central London"
age$LondSR[age$subreg==2]<-"East London"
age$LondSR[age$subreg==3]<-"North London"
age$LondSR[age$subreg==4]<-"South London"
age$LondSR[age$subreg==5]<-"West London"
ggplot(age, aes(week,y=cases*(100000/pop),group=age2,color=age)) + stat_smooth(se=FALSE, span=2,size=.5) + theme(legend.position="bottom")+ ylab(expression(Delta*" per 100K"))+xlim(10,73)+facet_wrap(.~subreg,nrow=2,ncol=3)+facet_wrap(.~LondSR,nrow=2,ncol=3)+labs(title="7-day New Cases of Covid-19 in London by Age Group", caption = "Data source: ONS")+coord_cartesian(ylim=c(-10, 170))
source('C:/Users/Augustin/OneDrive - King\'s College London/adc/ArcScott/ArcScottSc.R')
```{r load-data-2,  echo=F, message=FALSE, warning=FALSE, include=T}
datage <- as_tibble(read_stata("../age.dta"))
datage <- as_tibble(read_stata("C:\Users\Augustin\Documents\GitHub\covid19\Data\London\age.dta))
datage <- as_tibble(read_stata("C:\Users\Augustin\Documents\GitHub\covid19\Data\London\age.dta"))
datage <- as_tibble(read_stata("c:\Users\Augustin\Documents\GitHub\covid19\Data\London\age.dta"))
datage <- as_tibble(read_stata("c:/Users/Augustin/Documents/GitHub/covid19/Data/London/age.dta"))
```{r load-data-2,  echo=F, message=FALSE, warning=FALSE, include=T}
View(datage)
datage
library(dplyr)
```{r load-data-2,  echo=F, message=FALSE, warning=FALSE, include=T}
source('~/GitHub/covid19/Source/London/ArcScottSc.R')
